<!doctype html>
<html lang="{{ site.lang | default: 'en-US' }}">
  {% include head.html %}
  <body class="bg-stone-50">
    {% include header.html %}

    <div class="flex">
      {% include sidebar.html %}

      <!-- Main content area -->
      <main class="flex-1 lg:ml-64">
        <div class="max-w-4xl mx-auto px-4 sm:px-6 lg:px-8 py-8">
          <!-- Breadcrumb for series pages -->
          {% if site.data.series %}
            {% for series in site.data.series %}
              {% for chapter in series.chapters %}
                {% if page.url contains chapter.slug %}
                  <nav class="mb-6 text-sm text-gray-600">
                    <a href="/" class="hover:text-amber-600">Home</a>
                    <span class="mx-2">›</span>
                    <a href="{{ series.main }}" class="hover:text-amber-600">{{ series.title }}</a>
                    <span class="mx-2">›</span>
                    <span class="text-gray-900">{{ chapter.title }}</span>
                  </nav>
                  {% break %}
                {% endif %}
              {% endfor %}
            {% endfor %}
          {% endif %}

          <!-- Page content -->
          <article class="prose prose-lg max-w-none prose-headings:text-gray-900 prose-a:text-blue-600 prose-a:no-underline hover:prose-a:underline prose-strong:text-gray-900 prose-code:text-amber-700 prose-code:bg-amber-50 prose-code:px-1 prose-code:py-0.5 prose-code:rounded">
            {{ content }}
          </article>

          <!-- Auto chapter navigation for series pages -->
          {% include chapter-nav.html %}
        </div>
      </main>

      <!-- Right-side TOC -->
      {% include toc.html %}
    </div>

    {% include footer.html %}
    {% include modal.html %}
    {% include scripts.html %}
  </body>
</html>
